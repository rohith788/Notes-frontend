{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/rohith/Documents/Projects/keeps-backend/client/src/components/card/card.component.jsx\",\n    _templateObject,\n    _templateObject2;\n\nimport React from \"react\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Draggable from \"react-draggable\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport ModalCard from \"../modal-card/modal-card.components\";\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\nimport { useForm } from \"../../utils/hooks\";\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    margin: 0\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  closeButton: {\n    position: \"absolute\"\n  }\n});\nexport default function NoteCard(_ref) {\n  var title = _ref.title,\n      noteText = _ref.noteText,\n      noteId = _ref.noteId;\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _useForm = useForm(updateNoteCallback, {\n    noteId: noteId,\n    title: title,\n    body: noteText\n  }),\n      values = _useForm.values,\n      onChange = _useForm.onChange,\n      onSubmit = _useForm.onSubmit;\n\n  var stopPropagation = function stopPropagation(e) {\n    e.stopPropagation();\n    deleteNote();\n  };\n\n  var _useMutation = useMutation(DELETE_NOTE_MUTATION, {\n    update: function update(proxy) {\n      var data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: data.getNotes.filter(function (note) {\n            return note.id !== noteId;\n          })\n        }\n      });\n    },\n    variables: {\n      noteId: noteId\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deleteNote = _useMutation2[0];\n\n  var _useMutation3 = useMutation(UPDATE_NOTE_MUTATION, {\n    variables: values,\n    update: function update(proxy, result) {\n      var data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: [result.data.updateNote].concat(_toConsumableArray(data.getNotes))\n        }\n      });\n      values.body = \"\";\n      values.title = \"\";\n    },\n    onError: function onError(err) {\n      return err;\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      updateNote = _useMutation4[0],\n      error = _useMutation4[1].error;\n\n  function updateNoteCallback(e) {\n    e.stopPropagation();\n    updateNote();\n  }\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    variant: \"outlined\",\n    onClick: handleClickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, title)), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, noteText), /*#__PURE__*/React.createElement(DeleteIcon, {\n    className: classes.icon,\n    onClick: stopPropagation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ModalCard, {\n    openStatus: open,\n    noteTitle: title,\n    noteText: noteText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    maxWidth: \"sm\",\n    onClose: handleClose,\n    PaperComponent: PaperComponent,\n    \"aria-labelledby\": \"draggable-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    style: {\n      cursor: \"move\"\n    },\n    id: \"draggable-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Email Address\",\n    type: \"email\",\n    value: values.title,\n    onChange: onChange,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-multiline-static\",\n    label: \"Multiline\",\n    multiline: true,\n    rows: 4,\n    onChange: onChange,\n    value: values.body,\n    variant: \"filled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    autoFocus: true,\n    onClick: onSubmit,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, \"update\"), /*#__PURE__*/React.createElement(Button, {\n    autoFocus: true,\n    onClick: handleClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(DeleteIcon, {\n    className: classes.icon,\n    onClick: stopPropagation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }))));\n}\nvar DELETE_NOTE_MUTATION = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  mutation deleteNote($noteId: ID!) {\\n    deleteNote(noteId: $noteId)\\n  }\\n\"])));\nvar UPDATE_NOTE_MUTATION = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  mutation updateNote($noteId: ID!, $text: String!, $body: String!) {\\n    deleteNote(noteId: $noteId, title: $title, body: $body)\\n  }\\n\"])));","map":{"version":3,"sources":["/home/rohith/Documents/Projects/keeps-backend/client/src/components/card/card.component.jsx"],"names":["React","makeStyles","withStyles","Card","CardContent","Typography","DeleteIcon","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Paper","Draggable","Button","TextField","gql","useMutation","ModalCard","FETCH_NOTES_QUERY","useForm","PaperComponent","props","useStyles","root","minWidth","margin","bullet","display","transform","title","fontSize","pos","marginBottom","closeButton","position","NoteCard","noteText","noteId","classes","useState","open","setOpen","updateNoteCallback","body","values","onChange","onSubmit","stopPropagation","e","deleteNote","DELETE_NOTE_MUTATION","update","proxy","data","readQuery","query","writeQuery","getNotes","filter","note","id","variables","UPDATE_NOTE_MUTATION","result","updateNote","onError","err","error","handleClickOpen","handleClose","icon","cursor"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Draggable from \"react-draggable\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport ModalCard from \"../modal-card/modal-card.components\";\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\nimport { useForm } from \"../../utils/hooks\";\n\nfunction PaperComponent(props) {\n  return (\n    <Draggable\n      handle=\"#draggable-dialog-title\"\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\n    >\n      <Paper {...props} />\n    </Draggable>\n  );\n}\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    margin: 0,\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  closeButton: {\n    position: \"absolute\",\n  },\n});\n\nexport default function NoteCard({ title, noteText, noteId }) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const { values, onChange, onSubmit } = useForm(updateNoteCallback, {\n    noteId: noteId,\n    title: title,\n    body: noteText,\n  });\n\n  const stopPropagation = (e) => {\n    e.stopPropagation();\n    deleteNote();\n  };\n\n  const [deleteNote] = useMutation(DELETE_NOTE_MUTATION, {\n    update(proxy) {\n      const data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY,\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: { getNotes: data.getNotes.filter((note) => note.id !== noteId) },\n      });\n    },\n    variables: {\n      noteId,\n    },\n  });\n\n  const [updateNote, { error }] = useMutation(UPDATE_NOTE_MUTATION, {\n    variables: values,\n    update(proxy, result) {\n      const data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY,\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: { getNotes: [result.data.updateNote, ...data.getNotes] },\n      });\n      values.body = \"\";\n      values.title = \"\";\n    },\n    onError(err) {\n      return err;\n    },\n  });\n\n  function updateNoteCallback(e) {\n    e.stopPropagation();\n    updateNote();\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <Card\n        className={classes.root}\n        variant=\"outlined\"\n        onClick={handleClickOpen}\n      >\n        <CardContent>\n          <Typography variant={\"h6\"} gutterBottom>\n            <b>{title}</b>\n          </Typography>\n          <Typography variant=\"h6\" component={\"span\"}>\n            {noteText}\n          </Typography>\n          <DeleteIcon className={classes.icon} onClick={stopPropagation} />\n        </CardContent>\n        <div>\n          <ModalCard openStatus={open} noteTitle={title} noteText={noteText} />\n        </div>\n      </Card>\n      <Dialog\n        open={open}\n        fullWidth={true}\n        maxWidth={\"sm\"}\n        onClose={handleClose}\n        PaperComponent={PaperComponent}\n        aria-labelledby=\"draggable-dialog-title\"\n      >\n        <DialogTitle style={{ cursor: \"move\" }} id=\"draggable-dialog-title\">\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Email Address\"\n            type=\"email\"\n            value={values.title}\n            onChange={onChange}\n            fullWidth\n          />\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            id=\"outlined-multiline-static\"\n            label=\"Multiline\"\n            multiline\n            rows={4}\n            onChange={onChange}\n            value={values.body}\n            variant=\"filled\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={onSubmit} color=\"primary\">\n            update\n          </Button>\n          <Button autoFocus onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n          <DeleteIcon className={classes.icon} onClick={stopPropagation} />\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n\nconst DELETE_NOTE_MUTATION = gql`\n  mutation deleteNote($noteId: ID!) {\n    deleteNote(noteId: $noteId)\n  }\n`;\nconst UPDATE_NOTE_MUTATION = gql`\n  mutation updateNote($noteId: ID!, $text: String!, $body: String!) {\n    deleteNote(noteId: $noteId, title: $title, body: $body)\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}