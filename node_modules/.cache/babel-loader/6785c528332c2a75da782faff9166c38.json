{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/rohith/Documents/Projects/keeps-backend/client/src/components/card/card.component.jsx\",\n    _templateObject,\n    _templateObject2;\n\nimport React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Draggable from \"react-draggable\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\nimport { useForm } from \"../../utils/hooks\";\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      minWidth: 250,\n      maxWidth: 400,\n      padding: theme.spacing(1),\n      margin: theme.spacing(1)\n    },\n    bullet: {\n      display: \"inline-block\",\n      margin: \"0 2px\",\n      transform: \"scale(0.8)\"\n    },\n    title: {\n      fontSize: 14\n    },\n    pos: {\n      marginBottom: 12\n    },\n    closeButton: {\n      position: \"absolute\"\n    },\n    icon: {\n      marginRight: \"auto\",\n      padding: 10\n    }\n  };\n});\nexport default function NoteCard(_ref) {\n  var title = _ref.title,\n      noteText = _ref.noteText,\n      noteId = _ref.noteId;\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _useForm = useForm(updateNoteCallback, {\n    noteId: noteId,\n    title: title,\n    body: noteText\n  }),\n      values = _useForm.values,\n      onChange = _useForm.onChange,\n      onSubmit = _useForm.onSubmit;\n\n  var stopPropagation = function stopPropagation(e) {\n    e.stopPropagation();\n    deleteNote();\n  };\n\n  var _useMutation = useMutation(DELETE_NOTE_MUTATION, {\n    update: function update(proxy) {\n      var data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: data.getNotes.filter(function (note) {\n            return note.id !== noteId;\n          })\n        }\n      });\n    },\n    variables: {\n      noteId: noteId\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deleteNote = _useMutation2[0];\n\n  var _useMutation3 = useMutation(UPDATE_NOTE_MUTATION, {\n    variables: {\n      noteId: values.noteId,\n      title: values.title,\n      body: values.body\n    },\n    update: function update(proxy, result) {\n      var data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: [result.data.updateNote].concat(_toConsumableArray(data.getNotes.filter(function (note) {\n            return note.id !== noteId;\n          })))\n        }\n      });\n    },\n    onError: function onError(err) {\n      return err;\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      updateNote = _useMutation4[0];\n\n  function updateNoteCallback() {\n    updateNote();\n    handleClose();\n  }\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    variant: \"outlined\",\n    onClick: handleClickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    component: \"h2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, title)), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, noteText), /*#__PURE__*/React.createElement(DeleteIcon, {\n    className: classes.icon,\n    onClick: stopPropagation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    maxWidth: \"sm\",\n    onClose: handleClose,\n    PaperComponent: PaperComponent,\n    \"aria-labelledby\": \"draggable-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    style: {\n      cursor: \"move\"\n    },\n    id: \"draggable-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField // autoFocus\n  , {\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Title\",\n    type: \"text\",\n    name: \"title\",\n    value: values.title,\n    onChange: onChange,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-multiline-static\",\n    label: \"Multiline\",\n    multiline: true,\n    rows: 4,\n    name: \"body\",\n    onChange: onChange,\n    value: values.body,\n    variant: \"filled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DeleteIcon, {\n    onClick: stopPropagation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    autoFocus: true,\n    onClick: onSubmit,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, \"update\"), /*#__PURE__*/React.createElement(Button, {\n    autoFocus: true,\n    onClick: handleClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n}\nvar DELETE_NOTE_MUTATION = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  mutation deleteNote($noteId: ID!) {\\n    deleteNote(noteId: $noteId)\\n  }\\n\"])));\nvar UPDATE_NOTE_MUTATION = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  mutation updateNote($noteId: ID!, $title: String!, $body: String!) {\\n    updateNote(noteId: $noteId, title: $title, body: $body) {\\n      id\\n      title\\n      body\\n      __typename\\n    }\\n  }\\n\"])));","map":{"version":3,"sources":["/home/rohith/Documents/Projects/keeps-backend/client/src/components/card/card.component.jsx"],"names":["React","makeStyles","Card","CardContent","CardActionArea","Typography","DeleteIcon","Dialog","DialogActions","DialogContent","DialogTitle","Paper","Draggable","Button","TextField","gql","useMutation","FETCH_NOTES_QUERY","useForm","PaperComponent","props","useStyles","theme","root","minWidth","maxWidth","padding","spacing","margin","bullet","display","transform","title","fontSize","pos","marginBottom","closeButton","position","icon","marginRight","NoteCard","noteText","noteId","classes","useState","open","setOpen","updateNoteCallback","body","values","onChange","onSubmit","stopPropagation","e","deleteNote","DELETE_NOTE_MUTATION","update","proxy","data","readQuery","query","writeQuery","getNotes","filter","note","id","variables","UPDATE_NOTE_MUTATION","result","updateNote","onError","err","handleClose","handleClickOpen","cursor"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Draggable from \"react-draggable\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\nimport { useForm } from \"../../utils/hooks\";\n\nfunction PaperComponent(props) {\n  return (\n    <Draggable\n      handle=\"#draggable-dialog-title\"\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\n    >\n      <Paper {...props} />\n    </Draggable>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    minWidth: 250,\n    maxWidth: 400,\n    padding: theme.spacing(1),\n    margin: theme.spacing(1),\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  closeButton: {\n    position: \"absolute\",\n  },\n  icon: { marginRight: \"auto\", padding: 10 },\n}));\n\nexport default function NoteCard({ title, noteText, noteId }) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const { values, onChange, onSubmit } = useForm(updateNoteCallback, {\n    noteId: noteId,\n    title: title,\n    body: noteText,\n  });\n\n  const stopPropagation = (e) => {\n    e.stopPropagation();\n    deleteNote();\n  };\n\n  const [deleteNote] = useMutation(DELETE_NOTE_MUTATION, {\n    update(proxy) {\n      const data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY,\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: { getNotes: data.getNotes.filter((note) => note.id !== noteId) },\n      });\n    },\n    variables: {\n      noteId,\n    },\n  });\n\n  const [updateNote] = useMutation(UPDATE_NOTE_MUTATION, {\n    variables: {\n      noteId: values.noteId,\n      title: values.title,\n      body: values.body,\n    },\n    update(proxy, result) {\n      const data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY,\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: [\n            result.data.updateNote,\n            ...data.getNotes.filter((note) => note.id !== noteId),\n          ],\n        },\n      });\n    },\n    onError(err) {\n      return err;\n    },\n  });\n\n  function updateNoteCallback() {\n    updateNote();\n    handleClose();\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <Card\n        className={classes.root}\n        variant=\"outlined\"\n        onClick={handleClickOpen}\n      >\n        <CardContent>\n          <Typography variant={\"h5\"} component=\"h2\" gutterBottom>\n            <b>{title}</b>\n          </Typography>\n          <Typography>{noteText}</Typography>\n          <DeleteIcon className={classes.icon} onClick={stopPropagation} />\n        </CardContent>\n      </Card>\n\n      <Dialog\n        open={open}\n        fullWidth={true}\n        maxWidth={\"sm\"}\n        onClose={handleClose}\n        PaperComponent={PaperComponent}\n        aria-labelledby=\"draggable-dialog-title\"\n      >\n        <DialogTitle style={{ cursor: \"move\" }} id=\"draggable-dialog-title\">\n          <TextField\n            // autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Title\"\n            type=\"text\"\n            name=\"title\"\n            value={values.title}\n            onChange={onChange}\n            fullWidth\n          />\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            id=\"outlined-multiline-static\"\n            label=\"Multiline\"\n            multiline\n            rows={4}\n            name=\"body\"\n            onChange={onChange}\n            value={values.body}\n            variant=\"filled\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <DeleteIcon onClick={stopPropagation} />\n          <Button autoFocus onClick={onSubmit} color=\"primary\">\n            update\n          </Button>\n          <Button autoFocus onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n\nconst DELETE_NOTE_MUTATION = gql`\n  mutation deleteNote($noteId: ID!) {\n    deleteNote(noteId: $noteId)\n  }\n`;\nconst UPDATE_NOTE_MUTATION = gql`\n  mutation updateNote($noteId: ID!, $title: String!, $body: String!) {\n    updateNote(noteId: $noteId, title: $title, body: $body) {\n      id\n      title\n      body\n      __typename\n    }\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}