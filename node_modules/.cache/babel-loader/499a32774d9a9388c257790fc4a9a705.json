{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _defineProperty from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rohith/Documents/Projects/keeps-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/rohith/Documents/Projects/keeps-backend/client/src/components/note-input-card/note-input-card.component.jsx\",\n    _templateObject;\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport gql from \"graphql-tag\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport clsx from \"clsx\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useForm } from \"../../utils/hooks\";\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\nvar useStyles = makeStyles({\n  // root: {\n  //   // minWidth: 275,\n  //   paddingBottom: 1,\n  //   boxShadow: \"none\",\n  // },\n  \"& .MuiTextField-root\": {\n    margin: theme.spacing(1),\n    width: \"25ch\"\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\"\n  }\n});\nexport default function NoteInputCard() {\n  var _React$createElement;\n\n  var _useForm = useForm(createNoteCallback, {\n    title: \"\",\n    body: \"\"\n  }),\n      values = _useForm.values,\n      onChange = _useForm.onChange,\n      onSubmit = _useForm.onSubmit;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1]; //expansion state of the card\n\n\n  var ref = useRef(null); // reference to tag to expand and compress\n\n  var classes = useStyles();\n\n  var _useMutation = useMutation(CREATE_NOTE_MUTATION, {\n    variables: values,\n    update: function update(proxy, result) {\n      var data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: {\n          getNotes: [result.data.createNote].concat(_toConsumableArray(data.getNotes))\n        }\n      });\n      values.body = \"\";\n      values.title = \"\";\n    },\n    onError: function onError(err) {\n      return err;\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createNote = _useMutation2[0],\n      error = _useMutation2[1].error;\n\n  function createNoteCallback() {\n    createNote();\n  } //save the card data\n\n\n  useEffect(function () {\n    document.addEventListener(\"click\", compressCard, true);\n    return function () {\n      document.removeEventListener(\"click\", compressCard, true);\n    };\n  }); //adding listner on mount for clicks\n\n  var compressCard = function compressCard(event) {\n    if (ref.current && !ref.current.contains(event.target)) {\n      if (expanded === true) {\n        setExpanded(false);\n      }\n    }\n  }; //compress Input card on outside click\n\n\n  var expandCard = function expandCard() {\n    setExpanded(true);\n  }; // Express input card on click\n\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    alignitems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.expand, _defineProperty({}, classes.expandOpen, expanded)),\n    onClick: expandCard,\n    \"aria-expanded\": expanded,\n    \"aria-label\": \"show more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"Title\",\n    label: \"Title\",\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"title\",\n    value: values.title,\n    error: error ? true : false,\n    onChange: onChange,\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"note_text\",\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, (_React$createElement = {\n    multiline: true,\n    rows: 4,\n    variant: \"outlined\"\n  }, _defineProperty(_React$createElement, \"rows\", 4), _defineProperty(_React$createElement, \"required\", true), _defineProperty(_React$createElement, \"label\", \"input note here\"), _defineProperty(_React$createElement, \"name\", \"body\"), _defineProperty(_React$createElement, \"value\", values.body), _defineProperty(_React$createElement, \"error\", error ? true : false), _defineProperty(_React$createElement, \"onChange\", onChange), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 13\n  }), _React$createElement))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, \"Add\")))));\n}\nvar CREATE_NOTE_MUTATION = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  mutation createNote($title: String!, $body: String!) {\\n    createNote(title: $title, body: $body) {\\n      id\\n      title\\n      body\\n      createdAt\\n      username\\n    }\\n  }\\n\"])));","map":{"version":3,"sources":["/home/rohith/Documents/Projects/keeps-backend/client/src/components/note-input-card/note-input-card.component.jsx"],"names":["React","useState","useEffect","useRef","gql","makeStyles","Card","CardActions","Collapse","clsx","Button","TextField","useMutation","useForm","FETCH_NOTES_QUERY","useStyles","margin","theme","spacing","width","expand","transform","marginLeft","NoteInputCard","createNoteCallback","title","body","values","onChange","onSubmit","expanded","setExpanded","ref","classes","CREATE_NOTE_MUTATION","variables","update","proxy","result","data","readQuery","query","writeQuery","getNotes","createNote","onError","err","error","document","addEventListener","compressCard","removeEventListener","event","current","contains","target","expandCard","root","expandOpen"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport gql from \"graphql-tag\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport clsx from \"clsx\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\n\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useForm } from \"../../utils/hooks\";\nimport { FETCH_NOTES_QUERY } from \"../../utils/graphql\";\n\nconst useStyles = makeStyles({\n  // root: {\n  //   // minWidth: 275,\n  //   paddingBottom: 1,\n  //   boxShadow: \"none\",\n  // },\n  \"& .MuiTextField-root\": {\n    margin: theme.spacing(1),\n    width: \"25ch\",\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n  },\n});\n\nexport default function NoteInputCard() {\n  const { values, onChange, onSubmit } = useForm(createNoteCallback, {\n    title: \"\",\n    body: \"\",\n  });\n  const [expanded, setExpanded] = useState(false); //expansion state of the card\n  const ref = useRef(null); // reference to tag to expand and compress\n  const classes = useStyles();\n\n  const [createNote, { error }] = useMutation(CREATE_NOTE_MUTATION, {\n    variables: values,\n    update(proxy, result) {\n      const data = proxy.readQuery({\n        query: FETCH_NOTES_QUERY,\n      });\n      proxy.writeQuery({\n        query: FETCH_NOTES_QUERY,\n        data: { getNotes: [result.data.createNote, ...data.getNotes] },\n      });\n      values.body = \"\";\n      values.title = \"\";\n    },\n    onError(err) {\n      return err;\n    },\n  });\n\n  function createNoteCallback() {\n    createNote();\n  } //save the card data\n\n  useEffect(() => {\n    document.addEventListener(\"click\", compressCard, true);\n    return () => {\n      document.removeEventListener(\"click\", compressCard, true);\n    };\n  }); //adding listner on mount for clicks\n\n  const compressCard = (event) => {\n    if (ref.current && !ref.current.contains(event.target)) {\n      if (expanded === true) {\n        setExpanded(false);\n      }\n    }\n  }; //compress Input card on outside click\n\n  const expandCard = () => {\n    setExpanded(true);\n  }; // Express input card on click\n\n  return (\n    <Card className={classes.root} alignitems=\"center\">\n      <CardActions disableSpacing>\n        <div\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={expandCard}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <TextField\n            id=\"Title\"\n            label=\"Title\"\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"title\"\n            value={values.title}\n            error={error ? true : false}\n            onChange={onChange}\n            autoFocus\n          />\n        </div>\n      </CardActions>\n      <div className=\"note_text\" ref={ref}>\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n          <div>\n            <TextField\n              multiline\n              rows={4}\n              variant=\"outlined\"\n              rows={4}\n              required\n              label=\"input note here\"\n              name=\"body\"\n              value={values.body}\n              error={error ? true : false}\n              onChange={onChange}\n            />\n          </div>\n          <div>\n            <Button onClick={onSubmit}>Add</Button>\n          </div>\n        </Collapse>\n      </div>\n    </Card>\n  );\n}\n\nconst CREATE_NOTE_MUTATION = gql`\n  mutation createNote($title: String!, $body: String!) {\n    createNote(title: $title, body: $body) {\n      id\n      title\n      body\n      createdAt\n      username\n    }\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}